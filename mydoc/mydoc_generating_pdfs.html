<!DOCTYPE html>
<html lang="en">
<html>
  <head>

 <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="You can generate a PDF from your Jekyll project. You do this by creating a web version of your project that is printer friendly. You then use utility called ...">
<meta name="keywords" content="publishingsingle_sourcingcontent-types,  PDF, prince, prince XML, ant, xsl fo">
<title>Generating PDFs  | TylModel documentation</title>
<link rel="stylesheet" type="text/css" href="../css/syntax.css">
<link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">-->
<link rel="stylesheet" type="text/css" href="../css/modern-business.css">
<link rel="stylesheet" type="text/css" href="../css/lavish-bootstrap.css">
<link rel="stylesheet" type="text/css" href="../css/customstyles.css">
<link rel="stylesheet" type="text/css" href="../css/theme-green.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="../js/jquery.navgoco.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="../js/toc.js"></script>
<script src="../js/customscripts.js"></script>
<link rel="shortcut icon" href="../common_images/favicon.ico" type="image/x-icon">
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->







 

<script>
  $(function () {
      $('[data-toggle="tooltip"]').tooltip()
  })
</script>



  </head>

<body>

   <!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="fa fa-home fa-lg navbar-brand" href="home.html">&nbsp;<span class="projectTitle"> TylModel documentation</span></a>

        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                














                
                
                
                
                <li><a href="https://github.com/tomjohnson1492/documentation-theme-jekyll" target="_blank">Github Repo</a></li>
                
                
                
                
                
                <li><a href="http://www.mate.it" target="_blank">Tyl Consulting</a></li>
                
                
                
                


                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->

                <li class="dropdown">
                    


                <!-- special insertion -->

               
                <!-- Send feedback function -->
<script>
function SendLinkByMail(href) {
var subject= "TylModel documentation feedback";
var body = "I have some feedback about the Generating PDFs page: ";
body += window.location.href;
body += "";
var uri = "mailto:tomjohnson1492@gmail.com?subject=";
uri += encodeURIComponent(subject);
uri += "&body=";
uri += encodeURIComponent(body);
window.location.href = uri;
}
</script>

<li><a href="javascript:(function()%7BSendLinkByMail()%3B%7D)()%3B" target="_blank"><i class="fa fa-envelope-o"></i> Feedback</a></li>


                <li>
                    <!-- start search -->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="../js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                        SimpleJekyllSearch.init({
                            searchInput: document.getElementById('search-input'),
                            resultsContainer: document.getElementById('results-container'),
                            dataSource: '../search.json',
                            searchResultTemplate: '<li><a href="{url}" title="Generating PDFs">{title}</a></li>',
                        noResultsText: 'No results found.',
                                limit: 10,
                                fuzzy: true,
                        })
                    </script>
                    <!-- end search -->
                </li>
            
        </div>
        <!-- /.container -->
</nav>


    <!-- Page Content -->
    <div class="container">
        <div class="col-lg-12">&nbsp;</div>


<!-- Content Row -->
<div class="row">
    <!-- Sidebar Column -->
    <div class="col-md-3">

        <script>

            $(document).ready(function() {
                // Initialize navgoco with default options
                $("#mysidebar").navgoco({
                    caretHtml: '',
                    accordion: true,
                    openClass: 'active', // open
                    save: false, // leave false or nav highlighting doesn't work right
                    cookie: {
                        name: 'navgoco',
                        expires: false,
                        path: '/'
                    },
                    slide: {
                        duration: 400,
                        easing: 'swing'
                    }
                });

                $("#collapseAll").click(function(e) {
                    e.preventDefault();
                    $("#mysidebar").navgoco('toggle', false);
                });

                $("#expandAll").click(function(e) {
                    e.preventDefault();
                    $("#mysidebar").navgoco('toggle', true);
                });

            });

        </script>


        














        <ul id="mysidebar" class="nav">

            <span class="siteTagline">TylModel</span>
            <span class="versionTagline">Version 1.0</span>

            
            
            
            <li><a href="#">Overview</a>
                <ul>
                    
                </ul>
                
                
            
            <li><a href="#">Basic Data</a>
                <ul>
                    
                    
                    
                    <li><a href="../tylmodel/language.html">1. Language</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="..">2. Country</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="..">3. Unit of Measure</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="..">4. Standardization Bodies</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="..">5. System of Units</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="..">6. Coordinate Systems</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="..">6. Calendar</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="..">7. Parameters</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="..">8. Authentication</a></li>
                    

                    

                    
                    
                </ul>
                
                
            
            <li><a href="#">Party</a>
                <ul>
                    
                    
                    
                    <li><a href="../tylmodel/party.html">1. Party</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="..">2. Identificators</a></li>
                    

                    

                    
                    
                </ul>
                
                
            
            <li><a href="#">Navigation</a>
                <ul>
                    
                </ul>
                
                
            
            <li><a href="#">Product</a>
                <ul>
                    
                </ul>
                
                
            
            <li><a href="#">Accounting</a>
                <ul>
                    
                </ul>
                
                
            
            <li><a href="#">Cost Accounting</a>
                <ul>
                    
                </ul>
                
                
                


                <!-- if you aren't using the accordion, uncomment this block:

                     <p class="external">
                         <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
                     </p>
                 -->

    </div>
    <!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
    <script>$("li.active").parents('li').toggleClass("active");</script>


            <!-- Content Column -->
            <div class="col-md-9">

                <div class="post-header">
   <h1 class="post-title-main">Generating PDFs</h1>
</div>

<div class="post-content">

   
    <div class="summary">You can generate a PDF from your Jekyll project. You do this by creating a web version of your project that is printer friendly. You then use utility called Prince to iterate through the pages and create a PDF from them. It works quite well and gives you complete control to customize the PDF output through CSS, including page directives and dynamic tags from Prince.</div>
   

<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>


<div id="toc"></div>


    

    <a target="_blank" href="https://github.com/tomjohnson1492/documentation-theme-jekyll/edit/reviews/mydoc/mydoc_generating_pdfs.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>
    

  <h2 id="pdf-overview">PDF overview</h2>

<p>This process for creating a PDF relies on Prince XML to transform the HTML content into PDF. Prince costs about $500 per license. That might seem like a lot, but if you&#39;re creating a PDF, you&#39;re probably working for a company that sells a product, so you likely have access to some resources.</p>

<p>The basic approach is to generate a list of all pages that need to be added to the PDF, and then add leverage Prince to package them up into a PDF.</p>

<p>It may seem like the setup is somewhat cumbersome, but it doesn&#39;t take long. Once you set it up, building a pdf is just a matter of running a couple of commands.</p>

<p>Also, creating a PDF this way gives you a lot more control and customization capabilities than with other methods for creating PDFs. If you know CSS, you can entirely customize the output.</p>

<h2 id="demo">Demo</h2>

<p>You can see an example of the finished product here: </p>

<p><a target="_blank" class="noCrossRef" href="files/"><button type="button" class="btn btn-default" aria-label="Left Align"><span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span> PDF Download</button></a></p>

<h2 id="1-set-up-prince">1. Set up Prince</h2>

<p>Download and install <a href="http://www.princexml.com/doc/installing/">Prince</a>.</p>

<p>You can install a fully functional trial version. The only difference is that the title page will have a small Prince PDF watermark.</p>

<h2 id="2-create-a-new-configuration-file-for-each-of-your-pdf-targets">2. Create a new configuration file for each of your PDF targets</h2>

<p>The PDF configuration file will build on the settings in the regular configuration file but will some additional fields. Here&#39;s the configuration file for the config_designers.yml file for this theme:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">destination: ../doc_outputs/mydoc/designers-pdf
url: &quot;http://127.0.0.1:4010&quot;
baseurl: &quot;/mydoc/designers-pdf&quot;
port: 4010
output: pdf
print_title: Jekyll theme for documentation — designers
print_subtitle: version 4.0
output: pdf
defaults:
  -
    scope:
      path: &quot;&quot;
      type: &quot;pages&quot;
    values:
      layout: &quot;page_print&quot;
      comments: true
      search: true
</code></pre></div>
<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note: </b> Although you're creating a PDF, you must still build an HTML web target before running Prince. Prince will pull from the HTML files and from the file-list for the TOC. Prince won't be able to find files if they simply have relative paths, such as /sample.html. The must have full URLs it can access &mdash; hence the <code>url</code> and <code>baseurl</code>. </div>

<p>Also note that the default page layout is <code>page_print</code>. This layout strips out all the sections that shouldn&#39;t appear in the print PDF, such as the sidebar and top navigation bar.</p>

<p>Finally, note that there&#39;s a <code>output: pdf</code> toggle in case you want to make some of your content unique to PDF output. For example, you could add conditional logic that checks whether <code>site.output</code> is <code>pdf</code> or <code>web</code>. If it&#39;s <code>pdf</code>, then include information only for the PDF, and so on. </p>

<p>In the configuration file, customize the values for the <code>print_title</code> and <code>print_subtitle</code> that you want. These will appear on the title page of the PDF.</p>

<h2 id="3-make-sure-your-sidebar_doc-yml-file-has-a-titlepage-html-and-tocpage-html">3. Make sure your sidebar_doc.yml file has a titlepage.html and tocpage.html</h2>

<p>There are two template pages in the root directory that are critical to the PDF:</p>

<ul>
<li>titlepage.html</li>
<li>tocpage.html</li>
</ul>

<p>These pages should appear in your sidebar YML file (in this theme, sidebar_doc.yml):</p>
<div class="highlight"><pre><code class="language-json" data-lang="json">  <span class="err">-</span> <span class="err">title:</span>
    <span class="err">audience:</span> <span class="err">writers,</span> <span class="err">designers</span>
    <span class="err">platform:</span> <span class="err">all</span>
    <span class="err">product:</span> <span class="err">all</span>
    <span class="err">version:</span> <span class="err">all</span>
    <span class="err">output:</span> <span class="err">pdf</span>
    <span class="err">type:</span> <span class="err">frontmatter</span>
    <span class="err">items:</span>
    <span class="err">-</span> <span class="err">title:</span>
      <span class="err">url:</span> <span class="err">/titlepage.html</span>
      <span class="err">audience:</span> <span class="err">writers,</span> <span class="err">designers</span>
      <span class="err">platform:</span> <span class="err">all</span>
      <span class="err">product:</span> <span class="err">all</span>
      <span class="err">version:</span> <span class="err">all</span>
      <span class="err">output:</span> <span class="err">pdf</span>
      <span class="err">type:</span> <span class="err">frontmatter</span>
    <span class="err">-</span> <span class="err">title:</span>
      <span class="err">url:</span> <span class="err">/tocpage.html</span>
      <span class="err">audience:</span> <span class="err">writers,</span> <span class="err">designers</span>
      <span class="err">platform:</span> <span class="err">all</span>
      <span class="err">product:</span> <span class="err">all</span>
      <span class="err">version:</span> <span class="err">all</span>
      <span class="err">output:</span> <span class="err">pdf</span>
      <span class="err">type:</span> <span class="err">frontmatter</span>
</code></pre></div>
<p>Leave these pages here in your sidebar. (The <code>output: pdf</code> property means they won&#39;t appear in your online TOC because the conditional logic of the sidebar.html checks whether <code>web</code> is equal to <code>pdf</code> or not before including the item in the web version of the content.)</p>

<p>The code in the tocpage.html is nearly identical to that of the sidebar.html page except that it includes the <code>site</code> and <code>baseurl</code> for the URLs. This is essential for Prince to create the page numbers correctly with cross references.</p>

<p>There&#39;s another file (in the root directory of the theme) that is critical to the PDF generation process: prince-file-list.txt. This file simply iterates through the items in your sidebar and creates a list of links. Prince will consume the list of links from prince-file-list.txt and create a running PDF that contains all of the pages listed, with appropriate cross references and styling for them all.</p>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note: </b> If you have any files that you do not want to appear in the PDF, add <code>output: web</code> (rather than <code>output: pdf</code>) in the list of attributes in your sidebar. The prince-file-list.txt file that loops through the mydoc_sidebar.yml file to grab the URLs of each page that should appear in the PDF will skip over any items that do not list <code>output: pdf</code> in the item attributes. For example, you might not want your tag archives to appear in the PDF, but you probably will want to list them in the online help navigation. </div>

<h2 id="4-customize-your-headers-and-footers">4. Customize your headers and footers</h2>

<p>Open up the css/printstyles.css file and customize what you want for the headers and footers. At the very least, customize the email address (<code>youremail@domain.com</code>) that appears in the bottom left.</p>

<p>Exactly how the print styling works here is pretty cool. You don&#39;t need to understand the rest of the content in this section unless you want to customize your PDFs to look different from what I&#39;ve configured. </p>

<p>This style creates a page reference for a link:</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">a</span><span class="o">[</span><span class="nt">href</span><span class="o">]:</span><span class="nd">:after</span> <span class="p">{</span>
    <span class="k">content</span><span class="o">:</span> <span class="s2">&quot; (page &quot;</span> <span class="n">target</span><span class="o">-</span><span class="n">counter</span><span class="p">(</span><span class="n">attr</span><span class="p">(</span><span class="n">href</span><span class="p">)</span><span class="o">,</span> <span class="k">page</span><span class="p">)</span> <span class="s2">&quot;)&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>You don&#39;t want cross references for any link that doesn&#39;t reference another page, so this style specifies that the content after should be blank:</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">a</span><span class="o">[</span><span class="nt">href</span><span class="o">*=</span><span class="s2">&quot;mailto&quot;</span><span class="o">]:</span><span class="nd">:after</span><span class="o">,</span> <span class="nt">a</span><span class="o">[</span><span class="nt">data-toggle</span><span class="o">=</span><span class="s2">&quot;tooltip&quot;</span><span class="o">]:</span><span class="nd">:after</span><span class="o">,</span> <span class="nt">a</span><span class="o">[</span><span class="nt">href</span><span class="o">]</span><span class="nc">.noCrossRef</span><span class="o">:</span><span class="nd">:after</span> <span class="p">{</span>
    <span class="k">content</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="alert alert-success" role="alert"><i class="fa fa-check-square-o"></i> <b>Tip: </b> If you have a link to a file download, or some other link that shouldn't have a cross reference (such as link used in JavaScript for navtabs or collapsible sections, for example, add `noCrossRef` as a class to the link to avoid having it say "page 0" in the cross reference.</div>

<p>This style specifies that following links to web resources, the URL should be inserted instead of the page number: </p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">a</span><span class="o">[</span><span class="nt">href</span><span class="o">^=</span><span class="s2">&quot;http:&quot;</span><span class="o">]:</span><span class="nd">:after</span><span class="o">,</span> <span class="nt">a</span><span class="o">[</span><span class="nt">href</span><span class="o">^=</span><span class="s2">&quot;https:&quot;</span><span class="o">]:</span><span class="nd">:after</span> <span class="p">{</span>
    <span class="k">content</span><span class="o">:</span> <span class="s2">&quot; (&quot;</span> <span class="n">attr</span><span class="p">(</span><span class="n">href</span><span class="p">)</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>This style sets the page margins:</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="k">@page</span> <span class="p">{</span>
    <span class="nt">margin</span><span class="o">:</span> <span class="nt">60pt</span> <span class="nt">90pt</span> <span class="nt">60pt</span> <span class="nt">90pt</span><span class="o">;</span>
    <span class="nt">font-family</span><span class="o">:</span> <span class="nt">sans-serif</span><span class="o">;</span>
    <span class="nt">font-style</span><span class="nd">:none</span><span class="o">;</span>
    <span class="nt">color</span><span class="o">:</span> <span class="nt">gray</span><span class="o">;</span>

<span class="p">}</span>
</code></pre></div>
<p>To set a specific style property for a particular page, you have to name the page. This allows Prince to identify the page. </p>

<p>First you add frontmatter to the page that specifies the type. For the titlepage.html, here&#39;s the frontmatter:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">---
type: title
---
</code></pre></div>
<p>For the tocpage, here&#39;s the frontmatter:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">---
type: frontmatter
---
</code></pre></div>
<p>For the index.html page, we have this type tag (among others):</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">---
type: first_page
---
</code></pre></div>
<p>The default_print.html layout will change the class of the <code>body</code> element based on the type value in the page&#39;s frontmatter:</p>
<div class="highlight"><pre><code class="language-liquid" data-lang="liquid">&lt;body class=&quot;<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">page</span><span class="p">.</span><span class="nv">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;title&quot;</span><span class="p">%}</span><span class="nv">title</span><span class="err">{%</span><span class="w"> </span><span class="nv">elsif</span><span class="w"> </span><span class="nv">page</span><span class="p">.</span><span class="nv">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;frontmatter&quot;</span><span class="w"> </span><span class="p">%}</span><span class="nv">frontmatter</span><span class="err">{%</span><span class="w"> </span><span class="nv">elsif</span><span class="w"> </span><span class="nv">page</span><span class="p">.</span><span class="nv">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;first_page&quot;</span><span class="w"> </span><span class="p">%}</span><span class="nv">first_page</span><span class="err">{%</span><span class="w"> </span><span class="nv">endif</span><span class="w"> </span><span class="p">%}</span> print&quot;&gt;
</code></pre></div>
<p>Now in the css/printstyles.css file, you can assign a page name based on a specific class:</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">body</span><span class="nc">.title</span> <span class="p">{</span> <span class="k">page</span><span class="o">:</span> <span class="n">title</span> <span class="p">}</span>
</code></pre></div>
<p>This means that for content inside of <code>body class=&quot;title&quot;</code>, we can style this page in our stylesheet using <code>@page title</code>.</p>

<p>Here&#39;s how that title page is styled: </p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="k">@page</span> <span class="nt">title</span> <span class="p">{</span>
    <span class="k">@top-left</span> <span class="p">{</span>
        <span class="nt">content</span><span class="o">:</span> <span class="s2">&quot; &quot;</span><span class="o">;</span>
    <span class="p">}</span>
    <span class="k">@top-right</span> <span class="p">{</span>
        <span class="nt">content</span><span class="o">:</span> <span class="s2">&quot; &quot;</span>
    <span class="p">}</span>
    <span class="k">@bottom-right</span> <span class="p">{</span>
        <span class="nt">content</span><span class="o">:</span> <span class="s2">&quot; &quot;</span><span class="o">;</span>
    <span class="p">}</span>
    <span class="k">@bottom-left</span> <span class="p">{</span>
        <span class="nt">content</span><span class="o">:</span> <span class="s2">&quot; &quot;</span><span class="o">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>As you can see, we don&#39;t have any header or footer content, because it&#39;s the title page.</p>

<p>For the tocpage.html, which has the <code>type: frontmatter</code>, this is specified in the stylesheet: </p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">body</span><span class="nc">.frontmatter</span> <span class="p">{</span> <span class="k">page</span><span class="o">:</span> <span class="n">frontmatter</span> <span class="p">}</span>
<span class="nt">body</span><span class="nc">.frontmatter</span> <span class="p">{</span><span class="k">counter-reset</span><span class="o">:</span> <span class="k">page</span> <span class="m">1</span><span class="p">}</span>


<span class="k">@page</span> <span class="nt">frontmatter</span> <span class="p">{</span>
    <span class="k">@top-left</span> <span class="p">{</span>
        <span class="nt">content</span><span class="o">:</span> <span class="nt">prince-script</span><span class="o">(</span><span class="nt">guideName</span><span class="o">);</span>
    <span class="p">}</span>
    <span class="k">@top-right</span> <span class="p">{</span>
        <span class="nt">content</span><span class="o">:</span> <span class="nt">prince-script</span><span class="o">(</span><span class="nt">datestamp</span><span class="o">);</span>
    <span class="p">}</span>
    <span class="k">@bottom-right</span> <span class="p">{</span>
        <span class="nt">content</span><span class="o">:</span> <span class="nt">counter</span><span class="o">(</span><span class="nt">page</span><span class="o">,</span> <span class="nt">lower-roman</span><span class="o">);</span>
    <span class="p">}</span>
    <span class="k">@bottom-left</span> <span class="p">{</span>
        <span class="nt">content</span><span class="o">:</span> <span class="s2">&quot;youremail@domain.com&quot;</span><span class="o">;</span>   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>With <code>counter(page, lower-roman)</code>, we reset the page count to 1 so that the title page doesn&#39;t start the count. Then we also add some header and footer info. The page numbers start counting in lower-roman numerals.</p>

<p>Finally, for the first page (which doesn&#39;t have a specific name), we restart the counting to 1 again and this time use regular numbers. </p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">body</span><span class="nc">.first_page</span> <span class="p">{</span><span class="k">counter-reset</span><span class="o">:</span> <span class="k">page</span> <span class="m">1</span><span class="p">}</span>

<span class="nt">h1</span> <span class="p">{</span> <span class="n">string</span><span class="o">-</span><span class="n">set</span><span class="o">:</span> <span class="n">doctitle</span> <span class="k">content</span><span class="p">()</span> <span class="p">}</span>

<span class="k">@page</span> <span class="p">{</span>
    <span class="k">@top-left</span> <span class="p">{</span>
        <span class="nt">content</span><span class="o">:</span> <span class="nt">string</span><span class="o">(</span><span class="nt">doctitle</span><span class="o">);</span>
        <span class="nt">font-size</span><span class="o">:</span> <span class="nt">11px</span><span class="o">;</span>
        <span class="nt">font-style</span><span class="o">:</span> <span class="nt">italic</span><span class="o">;</span>
    <span class="p">}</span>
    <span class="k">@top-right</span> <span class="p">{</span>
        <span class="nt">content</span><span class="o">:</span> <span class="nt">prince-script</span><span class="o">(</span><span class="nt">datestamp</span><span class="o">);</span>
        <span class="nt">font-size</span><span class="o">:</span> <span class="nt">11px</span><span class="o">;</span>
    <span class="p">}</span>

    <span class="k">@bottom-right</span> <span class="p">{</span>
        <span class="nt">content</span><span class="o">:</span> <span class="s2">&quot;Page &quot;</span> <span class="nt">counter</span><span class="o">(</span><span class="nt">page</span><span class="o">);</span>
        <span class="nt">font-size</span><span class="o">:</span> <span class="nt">11px</span><span class="o">;</span>
    <span class="p">}</span>
    <span class="k">@bottom-left</span> <span class="p">{</span>
        <span class="nt">content</span><span class="o">:</span> <span class="nt">prince-script</span><span class="o">(</span><span class="nt">guideName</span><span class="o">);</span>
        <span class="nt">font-size</span><span class="o">:</span> <span class="nt">11px</span><span class="o">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>You&#39;ll see some other items in there such as <code>prince-script</code>. This means we&#39;re using JavaScript to run some functions to dynamically generate that content. These JavaScript functions are located in the _includes/head_print.html:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
    <span class="nx">Prince</span><span class="p">.</span><span class="nx">addScriptFunc</span><span class="p">(</span><span class="s2">&quot;datestamp&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;PDF last generated: January 09, 2016&quot;</span><span class="p">;</span>
    <span class="p">});</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>

<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
    <span class="nx">Prince</span><span class="p">.</span><span class="nx">addScriptFunc</span><span class="p">(</span><span class="s2">&quot;guideName&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot; User Guide&quot;</span><span class="p">;</span>
    <span class="p">});</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div>
<p>There are a couple of Prince functions that are default functions from Prince. This gets the heading title of the page:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js">        <span class="nx">content</span><span class="o">:</span> <span class="nx">string</span><span class="p">(</span><span class="nx">doctitle</span><span class="p">);</span>
</code></pre></div>
<p>This gets the current page: </p>
<div class="highlight"><pre><code class="language-js" data-lang="js">        <span class="nx">content</span><span class="o">:</span> <span class="s2">&quot;Page &quot;</span> <span class="nx">counter</span><span class="p">(</span><span class="nx">page</span><span class="p">);</span>
</code></pre></div>
<p>Because the theme uses JavaScript in the CSS, you have to add the <code>--javascript</code> tag in the Prince command (detailed later on this page).</p>

<h2 id="5-customize-the-pdf-script">5. Customize the PDF script</h2>

<p>Open the mydoc_1_multiserve_pdf.sh file in the root directory and customize it for your specific configuration files. </p>

<p>echo &#39;Killing all Jekyll instances&#39;
kill -9 $(ps aux | grep &#39;[j]ekyll&#39; | awk &#39;{print $2}&#39;)
clear</p>

<p>echo &quot;Building PDF-friendly HTML site for Mydoc Writers ...&quot;
jekyll serve --detach --config configs/mydoc/config_writers.yml,configs/mydoc/config_writers_pdf.yml
echo &quot;done&quot;</p>

<p>echo &quot;Building PDF-friendly HTML site for Mydoc Designers ...&quot;
jekyll serve --detach --config configs/mydoc/config_designers.yml,configs/mydoc/config_designers_pdf.yml
echo &quot;done&quot;</p>

<p>echo &quot;All done serving up the PDF-friendly sites. Now let&#39;s generate the PDF files from these sites.&quot;
echo &quot;Now run . mydoc_2_multibuild_pdf.sh&quot;</p>

<p>Note that the first part kills all Jekyll instances. This way you won&#39;t try to server Jekyll at a port that is already occupied.</p>

<p>The <code>jekyll serve</code> command serves up the HTML-friendly PDF configurations for our two projects. This web version is where Prince will go to get its content.</p>

<h2 id="6-configure-the-prince-scripts">6. Configure the Prince scripts</h2>

<p>Open up mydoc_2_multibuild_pdf.sh and look at the Prince commands:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># Doc Writers
echo &quot;Building the Mydoc Writers PDF ...&quot;
prince --javascript --input-list=../doc_outputs/mydoc/writers-pdf/prince-file-list.txt -o mydoc/files/mydoc_writers_pdf.pdf;
echo &quot;done&quot;

# Doc Designers
echo &quot;Building Mydoc Designers PDF ...&quot;
prince --javascript --input-list=../doc_outputs/mydoc/designers-pdf/prince-file-list.txt -o mydoc/files/mydoc_designers_pdf.pdf;
echo &quot;done&quot;

echo &quot;All done building the PDFs!&quot;
echo &quot;Now build the web outputs: . mydoc_3_multibuild_web.sh&quot;
</code></pre></div>
<p>This script issues a command to the Prince utility. JavaScript is enabled (<code>--javascript</code>), and we tell it exactly where to find the list of files (<code>--input-list</code>) &mdash; just point to the prince-file-list.txt file. Then we tell it where and what to output (<code>-o</code>).</p>

<p>Make sure that the path to the prince-file-list.txt is correct. For the output directory, I like to output the PDF file into my project&#39;s source (into the files folder). Then when I build the web output, the PDF is included and something I can refer to.</p>

<h2 id="7-add-a-download-button-for-the-pdf">7. Add a download button for the PDF</h2>

<p>You can add a download button for your PDF using some Bootstrap button code:</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;a</span> <span class="na">target=</span><span class="s">&quot;_blank&quot;</span> <span class="na">class=</span><span class="s">&quot;noCrossRef&quot;</span> <span class="na">href=</span><span class="s">&quot;files/tylmodel_english_pdf.pdf&quot;</span><span class="nt">&gt;&lt;button</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-default&quot;</span> <span class="na">aria-label=</span><span class="s">&quot;Left Align&quot;</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">&quot;glyphicon glyphicon-download-alt&quot;</span> <span class="na">aria-hidden=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;&lt;/span&gt;</span> PDF Download<span class="nt">&lt;/button&gt;&lt;/a&gt;</span>
</code></pre></div>
<p>Here&#39;s what that looks like:</p>

<p><a target="_blank" class="noCrossRef" href="files/tylmodel_english_pdf.pdf"><button type="button" class="btn btn-default" aria-label="Left Align"><span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span> PDF Download</button></a></p>

<p>The <code>{{site.pdf_file_name}}</code>{% raw %} is set in the configuration file.</p>

<p>{{site.data.alerts.note}} If you don&#39;t like the style of the PDFs, just adjust the styles in the printstyles.css file.{{site.data.alerts.end}}</p>

<h2 id="javascript-conflicts">JavaScript conflicts</h2>

<p>If you have JavaScript on any of your pages, Prince will note errors in Terminal like this:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">error: TypeError: value is not an object
</code></pre></div>
<p>However, the PDF will still build.</p>

<p>You need to conditionalize out any JavaScript from your PDF web output before building your PDFs. Make sure that the PDF configuration files have the <code>output: pdf</code> property.</p>

<p>Then surround the JavaScript with conditional tags like this:</p>

<p>{% raw %}
<code>
{% unless site.output == &quot;pdf&quot; %}
javascript content here ...
{% endunless %}
</code></p>

<p>For more detail about using <code>unless</code> in conditional logic, see <a href='../mydoc/mydoc_conditional_logic.html'>Conditional logic</a>. What this code means is &quot;run this code unless this value is the case.&quot;</p>

<h2 id="overriding-bootstrap-print-styles">Overriding Bootstrap Print Styles</h2>

<p>The theme relies on Bootstrap&#39;s CSS for styling. However, for print media, Bootstrap applies the following style:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">@media print{*,:after,:before{color:#000!important;text-shadow:none!important;background:0 0!important;-webkit-box-shadow:none!important;box-shadow:none!important}
</code></pre></div>
<p>This is minified, but basically the <code>*</code> (asterisk) means select all, and applied the color #000 (black). As a result, the Bootstrap style strips out all color from the PDF (for Bootstrap elements). </p>

<p>This is problematic for code snippets that have syntax highlighting. I decided to remove this de-coloring from the print output. I commented out the Bootstrap style:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">@media print{*,:after,:before{/*color:#000!important;*/text-shadow:none!important;/*background:0 0!important*/;-webkit-box-shadow:none!important;box-shadow:none!important}
</code></pre></div>
<p>If you update Bootrap, make sure you make this edit. (Sorry, admittedly I couldn&#39;t figure out how to simply overwrite the <code>*</code> selector with a later style.)</p>

<p>I did, however, remove the color from the alerts and lighten the background shading for <code>pre</code> elements. The printstyles.css has this setting.</p>


<div class="tags">
    
    <b>Tags: </b>
    













    
    
    <a href="tag_publishing.html" class="btn btn-default navbar-btn cursorNorm" role="button">publishing</a>
    
    
    
    <a href="tag_single_sourcing.html" class="btn btn-default navbar-btn cursorNorm" role="button">single_sourcing</a>
    
    
    
    
    
</div>



    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'idrbwjekyll'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


</div>



<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2016 Tyl Consulting. All rights reserved. <br />
<p>Page last updated:</span> November 30, 2015<br/> Site last generated: Jan 9, 2016 <br />
<p><img src="../common_images/company_logo.png/></p>
                </div>
            </div>
</footer>
            </div><!-- /.row -->

    </div>    <!-- /.container -->

</body>


</html>

